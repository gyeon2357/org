function browserDetect() {
  "Firefox" ==
    (function (e) {
      switch (!0) {
        case e.indexOf("edge") > -1:
          return "MS Edge";
        case e.indexOf("edg/") > -1:
          return "Edge ( chromium based)";
        case e.indexOf("opr") > -1 && !!window.opr:
          return "Opera";
        case e.indexOf("chrome") > -1 && !!window.chrome:
          return "Chrome";
        case e.indexOf("trident") > -1:
          return "MS IE";
        case e.indexOf("firefox") > -1:
          return "Firefox";
        case e.indexOf("safari") > -1:
          return "Safari";
        default:
          return "other";
      }
    })(window.navigator.userAgent.toLowerCase()) &&
    $("body").addClass("firefox");
}
function setVH() {
  let e = 0.01 * window.innerHeight;
  document.documentElement.style.setProperty("--vh", `${e}px`);
}
function openLinksInNewTab() {
  $('a[href^="http"]').attr({target: "_blank", rel: "noopener noreferrer"}),
    $('a[href^="//"]').attr({target: "_blank", rel: "noopener noreferrer"}),
    $('a[href^="' + window.location.origin + '"]').attr("target", "_self");
}
function preLoad() {
  var e;
  clearTimeout(e),
    (e = setTimeout(function () {
      $(".preload").removeClass("preload");
    }, 500));
}
function resizeSetHeight() {
  $(window).innerHeight();
  if ($(window).width() > 900) {
    $(".projectlist").innerHeight();
    $("#menu").css("height", "unset");
  } else $(window).width();
  if ($(window).width() < 900) {
    var e = $("#project__header").innerHeight();
    $(
      ".images__slideshow, .information__description, .overview__thumbnail__wrapper"
    ).css("padding-top", e + 20),
      $(".project__layer__header").css("height", e + 2);
  } else
    $(
      ".images__slideshow, .information__description, .overview__thumbnail__wrapper"
    ).css("padding-top", ""),
      $(".project__layer__header").css("height", "");
  var t = $(".gallery__img");
  t.css("height", ""),
    t.css("min-height", ""),
    t.css("max-height", ""),
    (e += 20);
  $(".gallery__img").innerHeight();
  var o = $(".slideshow__counter").outerHeight(),
    i = $(window).innerHeight() - e - o;
  $(window).width() < 900
    ? (t.css("height", i), t.css("min-height", i), t.css("max-height", i))
    : (t.css("height", ""), t.css("min-height", ""), t.css("max-height", ""));
}
function watchForHover() {
  let e = 0;
  function t() {
    new Date() - e < 500 || document.body.classList.add("hasHover");
  }
  document.addEventListener(
    "touchstart",
    function () {
      e = new Date();
    },
    !0
  ),
    document.addEventListener(
      "touchstart",
      function () {
        document.body.classList.remove("hasHover");
      },
      !0
    ),
    document.addEventListener("mousemove", t, !0),
    t();
}
function addBodyClass() {
  if (
    ($("body").removeClass(function (e, t) {
      return (t.match(/(^|\s)page--\S+/g) || []).join(" ");
    }),
    $("#atlas")[0])
  )
    $("body").addClass("page--atlas");
  else if ($("#project")[0]) $("body").addClass("page--project");
  else if ($("#information")[0]) $("body").addClass("page--information");
  else {
    if (!$("#general")[0]) return;
    $("body").addClass("page--general");
  }
}
var menuFadeInTimer,
  projectNumber,
  sameProjectNumber,
  projectTitle,
  $atlasProjectImageClicked,
  readmoreTimer,
  projectImagePointerEventTimer,
  projectLayerToggleTimer;
function toggleMenu() {
  var e;
  clearTimeout(menuFadeInTimer),
    (menuFadeInTimer = setTimeout(function () {
      $("#menu").css("opacity", "1");
    }, 300)),
    $(".header__menutoggle__item").click(function () {
      $("#menu").hasClass("visible")
        ? ($("#menu").removeClass("visible").addClass("hidden"),
          $("#menu__header").removeClass("visible").addClass("hidden"),
          $(window).width() < 900 &&
            ($(".language__item").removeClass("visible").addClass("hidden"),
            $("html, body").removeClass("overflowhidden")),
          $(".header__menutoggle__lang").hasClass("de")
            ? ($(".header__menutoggle__item .desktop").text("Menu"),
              $(".header__menutoggle__item .mobile").text("Menu"))
            : $(".header__menutoggle__lang").hasClass("en") &&
              ($(".header__menutoggle__item .desktop").text("Menu"),
              $(".header__menutoggle__item .mobile").text("Menu")))
        : $("#menu").hasClass("hidden") &&
          ($("#menu").removeClass("hidden").addClass("visible"),
          $("#menu__header").removeClass("hidden").addClass("visible"),
          $(window).width() < 900 &&
            ($(".language__item").removeClass("hidden").addClass("visible"),
            $("html, body").addClass("overflowhidden")),
          ($(".header__menutoggle__lang").hasClass("de") ||
            $(".header__menutoggle__lang").hasClass("en")) &&
            ($(".header__menutoggle__item .desktop").text("×"),
            $(".header__menutoggle__item .mobile").text("×")));
    }),
    $(document).on("click", function (e) {
      $(e.target).closest(".header__menutoggle__item").length ||
        ($("#menu").removeClass("visible").addClass("hidden"),
        $("#menu__header").removeClass("visible").addClass("hidden"),
        $(window).width() < 900 &&
          ($(".language__item").removeClass("visible").addClass("hidden"),
          $("html, body").removeClass("overflowhidden")),
        $(".header__menutoggle__lang").hasClass("de")
          ? ($(".header__menutoggle__item .desktop").text("Menu"),
            $(".header__menutoggle__item .mobile").text("Menu"))
          : $(".header__menutoggle__lang").hasClass("en") &&
            ($(".header__menutoggle__item .desktop").text("Menu"),
            $(".header__menutoggle__item .mobile").text("Menu")));
    }),
    $(".header__menutoggle__lang").click(function () {
      clearTimeout(e),
        (e = setTimeout(function () {
          $(".header__menutoggle__lang").hasClass("de")
            ? ($(".header__menutoggle__item .desktop").text("Menu"),
              $(".header__menutoggle__item .mobile").text("Menu"))
            : $(".header__menutoggle__lang").hasClass("en") &&
              ($(".header__menutoggle__item .desktop").text("Menu"),
              $(".header__menutoggle__item .mobile").text("Menu"));
        }, 600));
    });
}
function wbrDatenschutz() {}
function langMobileHidden() {
  $(window).width() < 900
    ? $(".language__item").removeClass("visible").addClass("hidden")
    : $(".language__item").removeClass("hidden").addClass("visible");
}
function dominantColors() {
  if ($("#atlas")[0]) {
    var e = $(".atlas__item").map(function () {
        return $(this).attr("data-dominantcolor-hex");
      }),
      t = Math.floor(Math.random() * e.length);
    atlasRandomDominantColor = e[t];
    var o = tinycolor(atlasRandomDominantColor).getBrightness();
    if (tinycolor(atlasRandomDominantColor).isLight())
      if (
        ($("#menu, #menu__header").css(
          "background-color",
          atlasRandomDominantColor
        ),
        o > 210)
      ) {
        var i = tinycolor(atlasRandomDominantColor).lighten(8).toString();
        $("#menu, #menu__header").css("background-color", i);
      } else {
        i = tinycolor(atlasRandomDominantColor).lighten(10).toString();
        $("#menu, #menu__header").css("background-color", i);
      }
    else {
      if (o < 10)
        var a = tinycolor(atlasRandomDominantColor)
          .brighten(10)
          .lighten(20)
          .toString();
      else if (o < 40)
        a = tinycolor(atlasRandomDominantColor)
          .brighten(10)
          .lighten(10)
          .toString();
      else a = tinycolor(atlasRandomDominantColor).lighten(20).toString();
      var n = tinycolor(a).lighten(10).toString();
      $("#menu, #menu__header").css("background-color", n);
    }
  }
  if ($("#project")[0]) {
    var r = $(
        ".project__layer.project__information, .project__layer.project__information .project__layer__body, .project__layer.project__information .project__layer__header"
      ),
      s = $(".slick-current .slideshow__item").attr("data-dominantcolor-hex"),
      l = tinycolor(s).setAlpha(0.99).toRgbString(),
      c = tinycolor(s).setAlpha(0).toRgbString(),
      d = tinycolor(s).getBrightness();
    if (tinycolor(s).isLight())
      if (
        (r.css("background-color", s),
        $(".readmore__gradient").css(
          "background",
          "linear-gradient(to bottom, " + c + "0%," + l + "100%"
        ),
        d > 210)
      ) {
        var m = tinycolor(s).lighten(8).toString();
        $("#menu, #menu__header").css("background-color", m);
      } else {
        m = tinycolor(s).lighten(10).toString();
        $("#menu, #menu__header").css("background-color", m);
      }
    else {
      if (d < 10) var _ = tinycolor(s).brighten(10).lighten(20).toString();
      else if (d < 40) _ = tinycolor(s).brighten(10).lighten(10).toString();
      else _ = tinycolor(s).lighten(20).toString();
      r.css("background-color", _);
      var h = tinycolor(_).setAlpha(0.99).toRgbString(),
        g = tinycolor(_).setAlpha(0).toRgbString();
      $(".readmore__gradient").css(
        "background",
        "linear-gradient(to bottom, " + g + "0%," + h + "100%"
      );
      var u = tinycolor(_).lighten(10).toString();
      $("#menu, #menu__header").css("background-color", u);
    }
    console.log(l);
  }
}
function lazyload() {}
function atlasImgHover() {
  $(document).on(
    "mouseenter",
    ".atlas__item:not(.hidden) .item__wrapper",
    function () {
      (projectNumber = $(this).parent().data("project")),
        (projectTitleNumber = $(this)
          .parent()
          .find(".item__projectnumber")
          .text()),
        (projectTitleName = $(this).parent().find(".item__projectname").text()),
        (sameProjectNumber = $("#atlas").find(
          "[data-project='" + projectNumber + "']"
        ))
          .find(".item__text")
          .css("opacity", "1"),
        $(".atlas__item")
          .not(sameProjectNumber)
          .find(".item__text")
          .css("opacity", "0"),
        $(window).width() > 700 &&
          ($(".projecttitle__number").text(projectTitleNumber),
          $(".projecttitle__name").text(projectTitleName));
    }
  ),
    $(document).on("mouseleave", ".atlas__item .item__wrapper", function () {
      $(".projecttitle__number").text(""),
        $(".projecttitle__name").text(""),
        $("#atlas").hasClass("projects--filtered")
          ? ($(".projecttitle__number").text(projectTitleNumber),
            $(".projecttitle__name").text(projectTitleName))
          : $(".atlas__item")
              .not(sameProjectNumber)
              .find(".item__text")
              .css("opacity", "1");
    });
}
function atlasImgClick() {
  // $(window).width() < 700 &&
  // $(".atlas__item__link").addClass("enabled").removeClass("disabled"),
  $(document).on("click", ".item__link__wrapper", function (e) {
    (projectLink = $(this).find(".atlas__item__link").attr("href")),
      $("#atlas").hasClass("projects--filtered") ||
        ($("#atlas").addClass("projects--filtered"),
        $(".projectlink__url")
          .addClass("url--active")
          .removeClass("url--inactive")
          .attr("href", projectLink),
        $(".atlas__item").not(sameProjectNumber).addClass("hidden"),
        $("#atlas__header .projectlink")
          .addClass("visible")
          .removeClass("hidden"),
        $(".atlas__item:not(.hidden) .atlas__item__link")
          .addClass("enabled")
          .removeClass("disabled"));

    // /edit
    $(".projecttitle__number").text(projectTitleNumber),
      $(".projecttitle__name").text(projectTitleName);
  }),
    $(document).on("click", function (e) {
      var t = $(e.target);
      t.closest(".atlas__item .item__link__wrapper").length ||
        t.closest(".projectlink__url").length ||
        t.closest(".header__menutoggle").length ||
        !$("#atlas")[0] ||
        ($("#atlas").removeClass("projects--filtered"),
        $(".projectlink__url")
          .addClass("url--inactive")
          .removeClass("url--active"),
        $(".atlas__item").removeClass("hidden"),
        $("#atlas__header .projectlink")
          .addClass("hidden")
          .removeClass("visible"),
        $(".atlas__item__link").addClass("disabled").removeClass("enabled"),
        $(".projecttitle__number").text(""),
        $(".projecttitle__name").text(""),
        $(".atlas__item")
          .not(sameProjectNumber)
          .find(".item__text")
          .css("opacity", "1"));
    });
}
function atlasSortMix() {
  $(document).on("click", ".atlas__sort__button", function () {
    $(".sort--active").removeClass("sort--active").addClass("sort--inactive"),
      $(this).removeClass("sort--inactive").addClass("sort--active");
  });
}
function projectSlideshowSlick() {
  var e,
    t,
    o,
    i = $(".nav--next"),
    a = $(".nav--prev"),
    n = $(".slideshow__gallery"),
    r = $(".counter__current");
  $(document).on("click", ".atlas__item", function () {
    $atlasProjectImageClicked = $(this).find(".item__imgnumber").text() - 1;
  }),
    clearTimeout(t),
    (t = setTimeout(function () {
      n.slick({
        autoplay: !1,
        lazyLoad: "ondemand",
        fade: !0,
        arrows: !0,
        dots: !1,
        nextArrow: i,
        prevArrow: a,
        speed: 300,
        touchThreshold: 100,
        initialSlide: $atlasProjectImageClicked,
        swipe: !1,
        swipeToSlide: !1,
        touchMove: !1,
        draggable: !1,
      }),
        clearTimeout(o),
        (o = setTimeout(function () {
          $atlasProjectImageClicked = 0;
        }, 300));
    }, 100));
  var s,
    l,
    c = function (t, o) {
      (e = t.slickCurrentSlide() + 1), t.slideCount, $(r).text(e);
    };
  n.on("init", function (e, t, o) {
    c(t), dominantColors();
  }),
    n.on("afterChange", function (e, t, o) {
      c(t), dominantColors();
    });
  var d = !1;
  let m, _;
  $(".slideshow__item")
    .each(function (e) {
      var t = $(this).find("img").attr("data-zoom");
      console.log(t),
        $(this).zoom({url: t, duration: 200, magnify: 0.8, touch: !0});
    })
    .on("mousedown touchstart", function (e) {
      (s = e.originalEvent.pageX
        ? e.originalEvent.pageX
        : e.originalEvent.touches[0].pageX),
        (m = new Date()),
        1 == e.touches.length ? (d = !0) : 2 == e.touches.length && (d = !1);
    })
    .on("touchmove", function (e) {
      1 != d &&
        0 == d &&
        2 == e.touches.length &&
        $(".zoomnotice").css("opacity", "1");
    })
    .on("mouseup touchend", function (e) {
      clearTimeout(l);
      var t =
        (e.originalEvent.pageX
          ? e.originalEvent.pageX
          : e.originalEvent.touches[0].pageX) - s;
      (_ = new Date()),
        (touchDuration = _ - m),
        $(".zoomnotice").css("opacity", "0");
      var o,
        i = $(window).width();
      0 == (o = 0 != t) && s < i / 2 && touchDuration < 200
        ? n.slick("slickPrev")
        : 0 == o && s > i / 2 && touchDuration < 200 && n.slick("slickNext"),
        1 == o && t > 0 && touchDuration < 200
          ? n.slick("slickPrev")
          : 1 == o && t < 0 && touchDuration < 200 && n.slick("slickNext"),
        (l = setTimeout(function () {
          d = !1;
        }, 300));
    }),
    $(".slideshow__item").removeClass("hidden").addClass("visible"),
    $(".overview__thumbnail").bind("click", function () {
      var e = $(this).attr("data-slick-index");
      n.slick("slickGoTo", e);
    }),
    i.on({
      mouseenter: function () {
        $(".tooltip").fadeIn().html("next"), console.log("Tooltip Test Next");
      },
      touchstart: function () {
        $(".tooltip").html("").hide().css("visibility", "hidden");
      },
      touchmove: function () {
        $(".tooltip").html("").hide();
      },
      touchend: function () {
        $(".tooltip").html("").hide();
      },
      touch: function () {
        $(".tooltip").hide();
      },
      mousemove: function (e) {
        $(".tooltip").css({left: e.pageX, top: e.pageY});
      },
      mouseleave: function () {
        $(".tooltip").html("");
      },
    }),
    a.on({
      mouseenter: function () {
        $(".tooltip").fadeIn().html("prev"), console.log("Tooltip Test Prev");
      },
      touchstart: function () {
        $(".tooltip").html("").hide().css("visibility", "hidden");
      },
      touchmove: function () {
        $(".tooltip").html("").hide();
      },
      touchend: function () {
        $(".tooltip").html("").hide();
      },
      mousemove: function (e) {
        $(".tooltip").css({left: e.pageX, top: e.pageY});
      },
      mouseleave: function () {
        $(".tooltip").html("");
      },
    });
}
function projectToggleLayersFunction(e, t) {
  $(document).on("click", e, function (o) {
    $(t).hasClass("hidden")
      ? ($(".project__layer.visible").removeClass("visible").addClass("hidden"),
        $(t).removeClass("hidden").addClass("visible"),
        $(".projecttoggle__item.active")
          .removeClass("active")
          .addClass("inactive"),
        $(e).removeClass("inactive").addClass("active"),
        $(".project__images").addClass("nopointerevents"),
        $(".projectclose").fadeOut())
      : (closeProjectLayers(), $(".projectclose").fadeIn()),
      projectSetMetaHeight(),
      o.stopImmediatePropagation();
  });
}
function closeProjectLayers() {
  $(".project__layer.visible").removeClass("visible").addClass("hidden"),
    $(".projecttoggle__item.active").removeClass("active").addClass("inactive"),
    clearTimeout(readmoreTimer),
    (readmoreTimer = setTimeout(function () {
      $(".readmore__wrapper").removeClass("hidden").addClass("visible"),
        $(".information__description").addClass("readmore");
    }, 300)),
    clearTimeout(projectImagePointerEventTimer),
    (projectImagePointerEventTimer = setTimeout(function () {
      $(".project__images").removeClass("nopointerevents");
    }, 500));
}
function projectToggleLayers() {
  var e;
  projectToggleLayersFunction(
    ".projecttoggle--information",
    ".project__information"
  ),
    projectToggleLayersFunction(
      ".projecttoggle--overview",
      ".project__overview"
    ),
    $(".project__layer")
      .on("touchend", function (t) {
        var o = $(t.target);
        if (
          (console.log(o),
          1 == e ||
            o.closest(".readmore__wrapper").length ||
            o.closest(".overview__thumbnail").length ||
            o.closest("#project .project__information a").length ||
            (closeProjectLayers(), $(".projectclose").fadeIn()),
          1 != e && o.closest(".overview__thumbnail").length)
        ) {
          console.log("Thumbnail clicked 1");
          var i = $(this).attr("data-slick-index");
          $slider.slick("slickGoTo", i),
            closeProjectLayers(),
            console.log("Touched and closed"),
            $(".projectclose").fadeIn();
        }
        t.stopImmediatePropagation();
      })
      .on("touchmove", function (t) {
        e = !0;
      })
      .on("touchstart", function () {
        e = !1;
      }),
    $(document).on("click", function (e) {
      var t = $(e.target);
      !$(".project__layer").hasClass("visible") ||
        t.closest(".projecttoggle__item").length ||
        t.closest(".header__menutoggle").length ||
        t.closest(".readmore__wrapper").length ||
        t.closest("#project .project__information a").length ||
        (console.log("Thumbnail clicked 2"),
        closeProjectLayers(),
        $(".projectclose").fadeIn()),
        e.stopImmediatePropagation();
    });
}
var slideshowTimer,
  slideInterval,
  slideshowIntervalTimer = !1;
function projectSlideshow() {
  $(".gallery__img:first").removeClass("hidden").addClass("visible");
  var e = $(".gallery__img.visible").data("count");
  $(".counter__current").text(e),
    $(document).on("click", ".nav--prev", function () {
      $(".gallery__img:first").removeClass("visible").addClass("hidden"),
        $(".gallery__img:last").removeClass("hidden").addClass("visible"),
        (e = $(".gallery__img.visible").data("count")),
        clearTimeout(slideshowTimer),
        (slideshowTimer = setTimeout(function () {
          $(".gallery__img.visible").prependTo(".slideshow__gallery").end();
        }, 400)),
        $(".counter__current").text(e);
    }),
    $(document).on("click", ".nav--next", function () {
      $(".gallery__img:first").removeClass("visible").addClass("hidden"),
        $(".gallery__img:nth-child(2)")
          .removeClass("hidden")
          .addClass("visible"),
        (e = $(".gallery__img.visible").data("count")),
        clearTimeout(slideshowTimer),
        (slideshowTimer = setTimeout(function () {
          $(".gallery__img:first").appendTo(".slideshow__gallery").end();
        }, 400)),
        $(".counter__current").text(e);
    });
}
var deleteZoomImgTimer,
  generalOpacityTimer,
  maxTotalHeight = 0;
function projectSliceMeta() {
  var e = $(".meta__wrapper").length,
    t = Math.ceil(e / 2),
    o = $(".meta__wrapper").slice(0, t),
    i = $(".meta__wrapper").slice(t, e),
    a = 0,
    n = 0;
  o.each(function () {
    a += $(this).outerHeight(!0);
  }),
    i.each(function () {
      n += $(this).outerHeight(!0);
    }),
    (maxTotalHeight = Math.max(a, n)),
    projectSetMetaHeight();
}
function projectSetMetaHeight() {
  $(".information__description").css("height", "");
  var e,
    t = $(".project__layer__body").height(),
    o = $(".information__description").height();
  $(window).width() > 700
    ? ($(".information__meta").css("height", "unset"),
      $(".information__meta").outerHeight(),
      $(".information__meta").css("height", maxTotalHeight + 10))
    : $(".information__meta").css("height", ""),
    $(".information__description").hasClass("readmore")
      ? $(window).width() > 700
        ? ($(window).width() > 700 && $(window).width() < 900
            ? (console.log("Tablet Hochformat"), (e = t - maxTotalHeight - 190))
            : $(window).width() > 900 &&
              (console.log("ab Tablet Querformat"),
              (e = t - maxTotalHeight - 80)),
          o > e
            ? ($(".readmore__wrapper").show(),
              $(".information__description.readmore").css("height", e))
            : o < e && $(".readmore__wrapper").hide())
        : $(".information__description.readmore").css("height", "50vh")
      : $(".information__description").css("height", "");
}
function projectDeleteZoomImg() {
  clearTimeout(deleteZoomImgTimer),
    (deleteZoomImgTimer = setTimeout(function () {
      $("body").hasClass("hasHover") &&
        $(window).width() > 1400 &&
        $(".zoomImg").remove();
    }, 250));
}
function projectReadMore() {
  $(".readmore__wrapper").click(function () {
    $(this).removeClass("visible").addClass("hidden");
    var e = $(".information__description"),
      t = e.addClass("autoheight").height();
    e
      .removeClass("autoheight")
      .animate({height: t == e.height() ? 100 : t}, 500),
      $(".information__description").removeClass("readmore");
  });
}
function generalMinHeight() {
  var e = $("#general").innerHeight();
  clearTimeout(generalOpacityTimer),
    (generalOpacityTimer = setTimeout(function () {
      $(".general__wrapper").css("opacity", "1");
    }, 500)),
    e < 500 && $(".general__wrapper").css("height", "80vh");
}
